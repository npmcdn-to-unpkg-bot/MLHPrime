<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>MLH Prime</title>
        <script src="phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        //  Note that this html file is set to pull down Phaser 2.5.0 from the JS Delivr CDN.
        //  Although it will work fine with this tutorial, it's almost certainly not the most current version.
        //  Be sure to replace it with an updated version before you start experimenting with adding your own code.

        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });
        var cursors;
        var player;

        var background1;
        var background2;

        function preload () {

            game.load.image('logo', 'assets/phaser.png');
            game.load.spritesheet('player', 'assets/player.png', 13, 21);

            game.load.image('laser', 'assets/laser.png');

            game.load.image('background', 'assets/background.png');
        }

        function create () {
            game.physics.startSystem(Phaser.Physics.ARCADE);

            background1 = game.add.sprite(0, 0, 'background');
            background2 = game.add.sprite(game.world.width, 0, 'background');

            player = game.add.sprite(32, game.world.centerY, 'player');
            player.anchor.setTo(0.5, 0.5);

            game.physics.arcade.enable(player);
            player.animations.add('walk', [0, 1, 2, 3], 10, true);

            cursors = game.input.keyboard.createCursorKeys();

            shoot = game.input.keyboard.addKey(Phaser.Keyboard.SPACE);
            shoot.onDown.add(shootLaser, this);

        }

        function update () {
            player.body.velocity.y = 0;
            player.body.velocity.x = 0;
            player.animations.stop();

            if(cursors.up.isDown)
            {
                player.body.velocity.y = -150;
                player.animations.play('walk');
            }
            else if(cursors.down.isDown) 
            {
                player.body.velocity.y = 150;
                player.animations.play('walk');
            }
            
            if(cursors.right.isDown)
            {
                player.body.velocity.x = 150;
                player.animations.play('walk');
            }
            else if(cursors.left.isDown) 
            {
                player.body.velocity.x = -150;
                player.animations.play('walk');
            }

        }

    };

    function shootLaser() {
        var laser = game.add.sprite(player.x, player.y, 'laser');
        game.physics.arcade.enable(laser);
        laser.body.velocity.x = 15;
    }

    </script>

    </body>
</html>